var LanguageNavigation={props:{classes:{generalMenuContainer:"dropdown-menu-container-JS",countriesContainer:"countries-container-JS",countriesListContainer:"countries-list-container-JS",langsContainer:"langs-container-JS",langsListContainer:"langs-list-container-JS",countryItem:"country-item-JS",langItem:"lang-item-JS",selected:"selected"},containers:{$langsListContainer:null,$countriesListContainer:null,$generalMenuContainer:null},cookieNames:{countrySelectedByUser:"country-selected-rp",countrySelectedByTarget:"country-selected-target-rp",languageSelected:"language-selected-rp"},defaultLanguageCountries:{es:"spain",en:"united kingdom",it:"italy",pt:"portugal",fr:"french"}},init:function(){$(".rp-language .dropdown-item").on("click",LanguageNavigation.handleLanguageClick),LanguageNavigation.initLogicForLanguageNavigationV2()},initLogicForLanguageNavigationV2:function(){var e,a,n,t,o;"undefined"!=typeof Repsol&&Repsol&&(e=document.querySelector("."+LanguageNavigation.props.classes.generalMenuContainer))&&(a=e.querySelector("."+LanguageNavigation.props.classes.countriesListContainer),n=e.querySelector("."+LanguageNavigation.props.classes.langsListContainer),t=Repsol.utils.getCookie(LanguageNavigation.props.cookieNames.countrySelectedByUser)||null,Repsol.utils.getCookie(LanguageNavigation.props.cookieNames.languageSelected),o=Repsol.utils.getCookie(LanguageNavigation.props.cookieNames.countrySelectedByTarget)||null,LanguageNavigation.storeContainersInProps(e,n,a),LanguageNavigation.loopCountriesList(a,{countrySelectedByUserPreviously:t,countrySelectedByTargetPreviously:o}))},storeContainersInProps:function(e,a,n){LanguageNavigation.props.containers.$generalMenuContainer=e,LanguageNavigation.props.containers.$langsListContainer=a||null,LanguageNavigation.props.containers.$countriesListContainer=n||null},loopCountriesList:function(e,{countrySelectedByUserPreviously:a,countrySelectedByTargetPreviously:n}){if(e){var t,o=e.querySelectorAll("."+LanguageNavigation.props.classes.countryItem),s=LanguageNavigation.props.containers.$langsListContainer||document;LanguageNavigation.orderItems(o),LanguageNavigation.cleanItemsSelected(o);for(t of o){var i=a?JSON.parse(a):null,r=n,g=s.querySelector("."+LanguageNavigation.props.classes.langItem+"."+LanguageNavigation.props.classes.selected),l=e.querySelectorAll("."+LanguageNavigation.props.classes.selected);LanguageNavigation.setEventsInCountryButtons(t),0===l.length&&LanguageNavigation.handlerCountrySelected(i,t,r,g)}}},orderItems:function(e){var a=document.querySelector(".countries-list-container-JS"),e=[...e];e.sort((e,a)=>{e=LanguageNavigation.textWithoutAccents(e.dataset.countryName.toLowerCase()),a=LanguageNavigation.textWithoutAccents(a.dataset.countryName.toLowerCase());return e<a?-1:a<e?1:0}),a.innerHTML="",e.forEach(e=>{a.appendChild(e)})},textWithoutAccents:function(e){let a={"á":"a","é":"e","í":"i","ó":"o","ú":"u","Á":"A","É":"E","Í":"I","Ó":"O","Ú":"U"};return e.split("").map(e=>a[e]||e).join("").toString()},handlerCountrySelected:function(e,a,n,t){e&&e.countryId&&LanguageNavigation.addSelectedClassInCountry(a,e.countryId),n&&!e&&LanguageNavigation.addSelectedClassInCountry(a,n),e||n||(a.dataset.country===LanguageNavigation.props.defaultLanguageCountries[""+t.dataset.lang]&&LanguageNavigation.checkAndAddSelectedClass(a),a.dataset.country===LanguageNavigation.props.defaultLanguageCountries[""+t.dataset.lang]&&Repsol.utils.setCookie(LanguageNavigation.props.cookieNames.countrySelectedByUser,JSON.stringify({countryId:a.dataset.country,langDefaultValue:t.dataset.lang})))},addSelectedClassInCountry:function(e,a){e.dataset.country===a&&LanguageNavigation.checkAndAddSelectedClass(e),e.dataset.country!==a&&e.classList.contains(LanguageNavigation.props.classes.selected)&&e.classList.remove(LanguageNavigation.props.classes.selected)},checkAndAddSelectedClass:function(e){return!e.classList.contains(LanguageNavigation.props.classes.selected)&&e.classList.add(LanguageNavigation.props.classes.selected)},setEventsInCountryButtons:function(o){o.addEventListener("click",e=>{var a,n,t;null!=o.getAttribute("href")?e.stopPropagation():(e=o.dataset.langDefault||o.closest("[data-lang-default]")?.dataset.langDefault,n=LanguageNavigation.props.containers.$langsListContainer||document,t=LanguageNavigation.props.containers.$countriesListContainer||document,a=n.querySelector("."+LanguageNavigation.props.classes.langItem+`[data-lang='${e}']`),n=n.querySelectorAll("."+LanguageNavigation.props.classes.langItem+"."+LanguageNavigation.props.classes.selected),t=t.querySelectorAll("."+LanguageNavigation.props.classes.countryItem+"."+LanguageNavigation.props.classes.selected),LanguageNavigation.cleanItemsSelected(n),LanguageNavigation.cleanItemsSelected(t),o.classList.add(LanguageNavigation.props.cookieNames.countrySelectedByUser),Repsol.utils.deleteCookie(LanguageNavigation.props.cookieNames.countrySelectedByUser),Repsol.utils.setCookie(LanguageNavigation.props.cookieNames.countrySelectedByUser,JSON.stringify({countryId:o.dataset.country,langDefaultValue:e})),a.click())})},cleanItemsSelected:function(e){for(var a of e)a.classList.contains(LanguageNavigation.props.classes.selected)&&a.classList.remove(LanguageNavigation.props.classes.selected)},handleLanguageClick:function(e){e.preventDefault(),LanguageNavigation.props.containers.$generalMenuContainer&&(Repsol.utils.deleteCookie(LanguageNavigation.props.cookieNames.languageSelected),Repsol.utils.setCookie(LanguageNavigation.props.cookieNames.languageSelected,$(this).attr("data-lang")));e=$(this).attr("href")+window.location.search+window.location.hash;window.location.href=e},autoScrollKeypress:function(e=null){var a=e||"m",n=document.querySelector(".dropdown-countries-list"),t=document.querySelectorAll(".rp-language.show .dropdown-item-country-language.country-item-JS");for(let e=0;e<t.length;e++){var o=t[e];if(o.dataset.countryName.toLowerCase().charAt(0)===a){n.scroll(0,o?.offsetTop-100);break}}},events:function(e){$(document).on("keypress","body",function(e){document.querySelector(".dropdown-menu.dropdown-countries.show")&&LanguageNavigation.autoScrollKeypress(String.fromCharCode(e.keyCode).toLowerCase())})}};$(document).ready(function(){LanguageNavigation.init(),LanguageNavigation.events()});