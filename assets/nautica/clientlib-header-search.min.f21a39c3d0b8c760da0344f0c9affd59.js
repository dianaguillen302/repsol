HeaderSearch={bpS:720,timeKey:null,timeOut:null,init:function(){"undefined"!=typeof Repsol&&(Repsol.utils.getTypePipeline($("header .block-search")),0<$(".embedded-search").length&&Repsol.utils.getTypePipeline($(".embedded-search")),0<$("header .header-net-search").length)&&Repsol.utils.getTypePipeline($("header .header-net-search")),HeaderSearch.initInfo(),HeaderSearch.events()},events:function(){$("#nav-header").on("shown.bs.collapse",function(){HeaderSearch.closeSearch()}),$(".block-search").on("shown.bs.collapse",function(){HeaderCOM.closeMenu(),HeaderSearch.openSearch(),$("header .block-search .box-input input").focus()}),$(".block-search").on("hidden.bs.collapse",function(){HeaderSearch.closeSearch()}),$(document).on("click","header .box-input .icon-rp, .embedded-search .box-input .icon-rp",function(){var e=$(this).parents(".search-content"),a=(Repsol.Analytics.clickSearch("header-search",e.find(".box-input input[name='search']").val()),{search_term:e.find(".box-input input[name='search']").val()});Repsol.AnalyticsRomProd.searchRomProd($(this),a),HeaderSearch.submitSearch(e)}),$(document).on("focus","header .box-input input[name='search']",function(e){HeaderCOM.closeMenu()}),$(document).on("focus click",".embedded-search .box-input input[name='search'], .header-net .search-content .box-input input[name='search']",function(e){var a=$(this).parents(".search-content");a.find(".list-results p").length&&a.find(".box-results").slideDown()}),$(document).on("keypress","header .box-input input[name='search'], .embedded-search .box-input input[name='search']",function(e){var a=$(this).parents(".search-content"),t=$(this).val();13==e.which&&0<t.length?(Repsol.Analytics.clickSearch("header-search",a.find(".box-input input[name='search']").val()),e={search_term:a.find(".box-input input[name='search']").val()},Repsol.AnalyticsRomProd.searchRomProd($(this),e),HeaderSearch.submitSearch(a)):0<t.length&&(null!=HeaderSearch.timeKey&&clearTimeout(HeaderSearch.timeKey),HeaderSearch.timeKey=setTimeout(HeaderSearch.predictiveSearch(a),500))}),$(document).on("keyup","header .box-input input[name='search'], .embedded-search .box-input input[name='search']",function(e){HeaderCOM.closeMenu(),0==$(this).val().length&&HeaderSearch.resetSearch()}),$(document).on("click","header:not(.header-net) .search-content .list-results p",function(){var e,a=$(this).parents(".search-content");$(".rp-intranet-page").length||(Repsol.Analytics.clickSearch("header-search",a.find(".box-input input[name='search']").val(),$(this).text()),e={search_term:a.find(".box-input input[name='search']").val(),search_suggestion:$(this).text()},Repsol.AnalyticsRomProd.searchRomProd($(this),e)),HeaderSearch.setValueSearch(a,$(this)),HeaderSearch.submitSearch(a),HeaderSearch.resetSearch()}),$(document).on("mouseenter","header .header-net-top .search-content .box-results .list-results, header .header-net-top .search-content .box-results .list-results p, .hero-net-tools-component .search-content .list-results, .hero-net-tools-component .search-content .list-results p",function(e){null!=HeaderSearch.timeOut&&(clearTimeout(HeaderSearch.timeOut),HeaderSearch.timeOut=null)}),$(document).on("click",function(e){var a=$(".search-content");$(e.target).closest(a).length||HeaderSearch.closeSearch()}),$(window).scroll(function(){HeaderSearch.closeSearch(),$(".block-search").collapse("hide")})},openSearch:function(){$(window).width()<=HeaderSearch.bpS&&$(document).find("body").addClass("modal-open")},closeSearch:function(){$(window).width()<=HeaderSearch.bpS&&$(document).find("body").removeClass("modal-open"),$(document).find(".search-content .box-results").slideUp()},initInfo:function(){var e=$("header .block-search").attr("data-organizationIdValue"),a=$("header .block-search").attr("data-restUriValue"),t=$("header .block-search").attr("data-accessTokenValue"),n=$("header .block-search").attr("data-searchHub");HeaderSearch.authorizationCall="Bearer "+t,HeaderSearch.predictiveWordsCount=$("header .block-search").attr("data-headerPredictiveWordsCount"),HeaderSearch.pipeline=$("header .block-search").attr("data-search-pipeline"),HeaderSearch.coveoLang=$("header .block-search").attr("data-coveoLangValue"),HeaderSearch.urlCall=a+"v2/querySuggest?organizationId="+e+"&pipeline="+HeaderSearch.pipeline+"&searchHub="+n},predictiveSearch:function(a){var e={q:a.find('input[name="search"]').val(),count:HeaderSearch.predictiveWordsCount,locale:HeaderSearch.coveoLang};$.ajax({url:HeaderSearch.urlCall,type:"POST",headers:{Authorization:HeaderSearch.authorizationCall,Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){e=JSON.parse(JSON.stringify(e));HeaderSearch.printResult(e,a)}})},printResult:function(e,a){var a=a.find(".box-results"),t=a.find(".list-results");if(t.empty(),null!=e&&null!=e.completions&&0<e.completions.length){a.is(":visible")||a.slideDown();for(var n=0;n<e.completions.length;n++)t.append("<p>"+e.completions[n].expression+"</p>")}else a.is(":visible")&&a.slideUp()},resetSearch:function(){$(".search-content").each(function(){var e=$(this).find(".box-results");e.find(".list-results").empty(),e.slideUp(),$(this).find(".box-input input[name='search']").val("")})},submitSearch:function(e){e.collapse("hide"),window.location.href=encodeURI(HeaderSearch.getUrl(e))},getUrl:function(e){return document.getElementById("coveo-key-attributes").getAttribute("data-url-search")+"#q="+e.find(".box-input input[name='search']").val()},setValueSearch:function(e,a){a=a.text();e.find(".box-input input[name='search']").val($.trim(a))}},$(document).ready(function(){HeaderSearch.init()});